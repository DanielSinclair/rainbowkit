---
title: 將您的 dApp 升級到 WalletConnect v2
description: RainbowKit 已經遷移到 v2，您可以在 5 分鐘內準備好您的 dApp
image: guide-walletconnect-v2.png
---

# 遷移到 WalletConnect v2

## 在 5 分鐘內準備好您的 dApp 以進行 v2 升級

WalletConnect v1 協議將於 2023 年 6 月 28 日關閉，RainbowKit 將助您輕鬆過渡。

RainbowKit 現在標準支持 WalletConnect v2，且無重大變更。 只需升級並參考以下指南以獲取更多詳情。

#### 了解 WalletConnect v2

WalletConnect 是允許用戶將他們的移動錢包連接到您的 dApp 的協議，也是 RainbowKit 的重要基礎。 最近發布的 WalletConnect v2 帶來了許多重要升級，使錢包與 dApp 的體驗更加出色。

在 v2 中，您的用戶現在可以同時連接多個鏈，所以您可以忘記切換鏈的操作。 它還擴展了對更多網絡的支持，並帶來了改進，使以太坊登錄速度更快。

#### 升級您的 dApp

如果您已經遵循了 RainbowKit `0.12.x` 和 `1.0.x` 的遷移指南，那麼您幾乎已經完成了！ 只需升級到最新的補丁版本並嘗試一下。

RainbowKit 在 `0.12.15` 和 `1.0.2` 中默認啟用了 WalletConnect v2。 我們仍然支持 `0.12.x`，以防您的 dApp 尚未升級到 wagmi v1 和 RainbowKit v1。

\*\*1. 升級依賴項

```bash
npm i @rainbow-me/rainbowkit@^1.0.2 wagmi@^1.2
```

如果您使用的是 `0.12.x` 或 `1.0.x` 之前的 RainbowKit 版本，只需按照[遷移指南](/docs/migration-guide)進行更新。

建議 `0.12.x` 的 dApp 開始升級到 wagmi v1，因為 WalletConnect v2 的穩定性改進將只包含在 wagmi 的未來版本中。

**2. 提供項目 ID**

每個依賴 WalletConnect 的 dApp 現在都需要從 [WalletConnect Cloud](https://cloud.walletconnect.com/) 獲取一個 `projectId`。 這完全免費，只需幾分鐘即可完成。

將您的 `projectId` 提供給 `getDefaultWallets` 和單個 RainbowKit 錢包連接器，如下所示：

```ts
const projectId = 'YOUR_PROJECT_ID';
const { wallets } = getDefaultWallets({
  appName: 'My RainbowKit App',
  projectId,
  chains,
});
const connectors = connectorsForWallets([
  ...wallets,
  {
    groupName: 'Other',
    wallets: [
      argentWallet({ projectId, chains }),
      trustWallet({ projectId, chains }),
      ledgerWallet({ projectId, chains }),
    ],
  },
]);
```

RainbowKit 是類型安全的，當缺少 `projectId` 時會警告您。 參考我們的示例以查看 v2 的實際運行情況：

- [Create React App](https://codesandbox.io/p/sandbox/github/rainbow-me/rainbowkit/tree/main/examples/with-create-react-app)
- [Next.js](https://codesandbox.io/p/sandbox/github/rainbow-me/rainbowkit/tree/main/examples/with-next)
- [Next.js App Router](https://codesandbox.io/p/sandbox/github/rainbow-me/rainbowkit/tree/main/examples/with-next-app)
- [Remix](https://codesandbox.io/p/sandbox/github/rainbow-me/rainbowkit/tree/main/examples/with-remix)
- [Vite](https://codesandbox.io/p/sandbox/github/rainbow-me/rainbowkit/tree/main/examples/with-vite)

參考[文件](https://www.rainbowkit.com/docs/custom-wallet-list#walletconnect)以獲取更多支持的選項。
